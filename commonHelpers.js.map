{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst searchForm = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\n\nconst createGalleryTemplate = imgData => {\n  return `\n  <li class=\"gallery-card\">\n  <a class=\"gallery-link\" href=${imgData.largeImageURL}>\n    <img class=\"gallery-img\" src=\"${imgData.webformatURL}\" alt=\"${imgData.tags}\" data-source=${imgData.largeImageURL} />\n  </a>\n<div class=\"data-wrapper\">\n<ul class=\"img-info\">\n  <li class=\"param-info\"><h2 class=\"param-name\">Likes</h2>\n  <p>${imgData.likes}</p></li>\n  <li class=\"param-info\"><h2 class=\"param-name\">Views</h2>\n  <p>${imgData.views}</p></li>\n  <li class=\"param-info\"><h2 class=\"param-name\">Comments</h2>\n  <p>${imgData.comments}</p></li>\n  <li class=\"param-info\"><h2 class=\"param-name\">Downloads</h2>\n  <p>${imgData.downloads}</p></li>\n</ul>\n</div>\n  </li>\n  `;\n};\n\nconst onFormSubmit = event => {\n    event.preventDefault();\n\n  const inputValue = searchForm.elements.query.value;\n\n  fetch(\n    `https://pixabay.com/api/?key=30578441-e990d3db57773391ef0ba167f&q=${inputValue}&image_type=photo&orientation=horizontal&safesearch=true`\n  )\n    \n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n\n      return response.json();\n    })\n    .then(data => {\n      console.log(data);\n\n      if (data.total === 0) {\n        iziToast.show({\n          message: `Sorry, there are no images matching your search query. Please try again!`,\n          messageColor: '#fff',\n          messageSize: '16px',\n          messageLineHeight: '24px',\n          iconUrl: '/img/error.svg',\n          backgroundColor: '#EF4040',\n          maxWidth: '330px',\n          closeOnClick: true,\n          position: 'topRight',\n          progressBarColor: '#B51B1B',\n        })\n      } else {\n          const galleryCardsTemplate = data.hits.map(imgInfo => createGalleryTemplate(imgInfo)).join('');\n\n        galleryEl.innerHTML = galleryCardsTemplate;\n        \n        const onSingleImageClick = event => {\n  event.preventDefault();\n\n  if (event.target === event.currentTarget) {\n    return;\n  };\n\n  const imgItem = event.target.closest('.gallery-img');\n  const imgSource = imgItem.dataset.source;\n  const imgInfo = data.hits.find(image => image.largeImageURL === imgSource);\n\n  const modalInstance =  basicLightbox.create(\n    `\n  <img\n    class=\"gallery-img\"\n    src=${imgInfo.largeImageURL}\n    data-source=${imgInfo.largeImageURL}\n    alt=${imgInfo.tags}\n  />\n    `\n  );\n\n  modalInstance.show();\n};\n\ngalleryEl.addEventListener('click', onSingleImageClick);\n    }\n    })\n    .catch(err => {\n      console.log(err);\n    });\n  \n  galleryEl.innerHTML = '';\n  \n}\n\nsearchForm.addEventListener('submit', onFormSubmit);\n"],"names":["searchForm","galleryEl","createGalleryTemplate","imgData","onFormSubmit","event","inputValue","response","data","iziToast","galleryCardsTemplate","imgInfo","onSingleImageClick","imgSource","image","err"],"mappings":"svBAOA,MAAMA,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAY,SAAS,cAAc,aAAa,EAEhDC,EAAwBC,GACrB;AAAA;AAAA,iCAEwBA,EAAQ,aAAa;AAAA,oCAClBA,EAAQ,YAAY,UAAUA,EAAQ,IAAI,iBAAiBA,EAAQ,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA,OAK7GA,EAAQ,KAAK;AAAA;AAAA,OAEbA,EAAQ,KAAK;AAAA;AAAA,OAEbA,EAAQ,QAAQ;AAAA;AAAA,OAEhBA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,IAOlBC,EAAeC,GAAS,CAC1BA,EAAM,eAAc,EAEtB,MAAMC,EAAaN,EAAW,SAAS,MAAM,MAE7C,MACE,qEAAqEM,CAAU,0DAChF,EAEE,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAQ,CAGZ,GAFA,QAAQ,IAAIA,CAAI,EAEZA,EAAK,QAAU,EACjBC,EAAS,KAAK,CACZ,QAAS,2EACT,aAAc,OACd,YAAa,OACb,kBAAmB,OACnB,QAAS,iBACT,gBAAiB,UACjB,SAAU,QACV,aAAc,GACd,SAAU,WACV,iBAAkB,SAC5B,CAAS,MACI,CACH,MAAMC,EAAuBF,EAAK,KAAK,IAAIG,GAAWT,EAAsBS,CAAO,CAAC,EAAE,KAAK,EAAE,EAE/FV,EAAU,UAAYS,EAEtB,MAAME,EAAqBP,GAAS,CAG1C,GAFAA,EAAM,eAAc,EAEhBA,EAAM,SAAWA,EAAM,cACzB,OAIF,MAAMQ,EADUR,EAAM,OAAO,QAAQ,cAAc,EACzB,QAAQ,OAC5BM,EAAUH,EAAK,KAAK,KAAKM,GAASA,EAAM,gBAAkBD,CAAS,EAElD,cAAc,OACnC;AAAA;AAAA;AAAA,UAGMF,EAAQ,aAAa;AAAA,kBACbA,EAAQ,aAAa;AAAA,UAC7BA,EAAQ,IAAI;AAAA;AAAA,KAGtB,EAEgB,KAAI,CACpB,EAEAV,EAAU,iBAAiB,QAASW,CAAkB,CACjD,CACL,CAAK,EACA,MAAMG,GAAO,CACZ,QAAQ,IAAIA,CAAG,CACrB,CAAK,EAEHd,EAAU,UAAY,EAExB,EAEAD,EAAW,iBAAiB,SAAUI,CAAY"}